<html>
<head>
<style>
body{
  background: -webkit-linear-gradient(left, #000, #333);
  background: linear-gradient(to right, #000, #222);
  font-family: 'Roboto', sans-serif;
}
section{
  margin: 50px;
}


/* follow me template */
.made-with-love {
  margin-top: 40px;
  padding: 10px;
  clear: left;
  text-align: center;
  font-size: 10px;
  font-family: arial;
  color: #fff;
}
.made-with-love i {
  font-style: normal;
  color: #F50057;
  font-size: 14px;
  position: relative;
  top: 2px;
}
.made-with-love a {
  color: #fff;
  text-decoration: none;
}
.made-with-love a:hover {
  text-decoration: underline;
}


/* for custom scrollbar for webkit browser*/

::-webkit-scrollbar {
    width: 6px;
} 
::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
} 
::-webkit-scrollbar-thumb {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
}
</style>
<script>
    window.onload = function () {
		fetch("./peers-by-fork.json")
	    .then(response => response.json())
	    .then(data => {
			var forks = [];
			forks = forks.concat(Object.keys(data));
			forks.sort();
			forks.forEach((fork) => {
				var forksDiv = document.getelementbyid("forks");
				var forkSection = document.createElement(section);
				forkSection.id = fork;
				forksDiv.appendChild(forkSection);
				var headline = document.createElement("h2");
				headline.InnerText = fork;
				forkSection.appendChild(headline);
				var tblHeader = document.createELement("div");
				tblHeader.classes = ["btl-header"];
				forkSection.appendChild(tblHeader);
				var table = document.createElement("table");
				table.cellpadding="0";
				table.cellspacing="0";
				table.border="0";
				tblHeader.appendChild(table);
				var thead = document.createElement("thead");
				table.appendChild(thead);
				var tr = document.createElement("tr");
				table.appendChild(tr);
				["Host", "Port", "LastConnection"].forEach((col) => {
					var th = document.createElement("th");
					th.InnerText = col;
					tr.appendChild(th);
				});
				
				var tblContent = document.createElement("div");
				tblContent.classes = ["tbl-content"];
				forkSection.appendChild(tblContent);
				var contentTable = document.createElement("table");
				contentTable.cellpadding="0";
				contentTable.cellspacing="0";
				contentTable.border="0";
				tblContent.appendChild(contentTable);
				
				var tbody = document.createElement("tbody");
				contentTable.appendChild(tbody);
				data[fork].forEach((peer) => {
					var tr = document.createElement("tr");
					tbody.appendChild(tr);
					["IP", "Port", "CreatedAt"].forEach((col) => {
						var td = document.createElement("td");
						td.InnerText(peer[col]);
						tr.appendChild(td);
					})
				});
			});
	    });
	};
</script>
</head>
<body>
<div id="forks"></div>
</body>
</html>
