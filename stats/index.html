<!html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <script>
        function addChart(currencyID, data) {
            document.body.appendChild('<h2>' + currencyID + '</h2>');
            document.body.appendChild('<div id="' + currencyID + '" class="chart"/>');

            const labels = Object.keys(data);
            const chartData = {
                labels: labels,
                datasets: [{
                    label: currencyID,
                    backgroundColor: 'rgb(255, 99, 132)',
                    borderColor: 'rgb(255, 99, 132)',
                    data: object.values(data),
                }]
            };
            const config = {
                type: 'line',
                chartData,
                options: {}
            };
            var myChart = new Chart(
                document.getElementById(currencyID),
                config
            );
        }

        function addCharts(json) {
            for (const [currencyId, data] of Object.entries(json))
                addChart(currencyId, data);
        }

        fetch("./targets-by-currency-by-date.json")
            .then(response => response.json())
            .then(addCharts);
    </script>
</body>
